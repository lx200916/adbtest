(function(e){function t(t){for(var n,r,c=t[0],o=t[1],l=t[2],d=0,p=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],n=!0,c=1;c<s.length;c++){var o=s[c];0!==a[o]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=s[0]))}return e}var n={},a={app:0},i=[];function r(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=n,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=o;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var n=s("64a9"),a=s.n(n);a.a},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var n=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[e.isAdbActive?s("b-modal",{attrs:{active:e.isAdbActive,"trap-focus":""},on:{"update:active":function(t){e.isAdbActive=t}}},[s("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[e._v("与Adb设备连接")])]),s("section",{staticClass:"modal-card-body"},[s("b-steps",{attrs:{animated:!0,hasNavigation:!1},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[s("b-step-item",{attrs:{label:"Welcome",clickable:!1}},[s("h1",{staticClass:"title has-text-centered"},[e._v("Welcome")]),s("p",[e._v("点击下方 Connect 来连接你的Adb设备.")]),s("p",[s("b",[e._v("Note："),s("br"),e._v("你需要Chrome 61以上内核来支持WebUSB.")])]),0!==e.errors.length?s("b-message",{staticStyle:{width:"50%","margin-left":"25%","margin-right":"25%"},attrs:{title:"Error!",type:"is-danger","aria-close-label":"Close message","has-icon":""}},[s("center",[e._v(e._s(e.errors))])],1):e._e(),s("b-button",{attrs:{type:"is-primary",outlined:""},on:{click:e.connect}},[e._v("Connect")])],1),s("b-step-item",{attrs:{label:"Auth",clickable:!1,type:{"is-success":e.isAuthSuccess},disabled:""}},[s("h1",{staticClass:"title has-text-centered"},[e._v("Auth")]),!1===e.isAuthSuccess?s("p",[e._v("请在"+e._s(e.usb.device["manufacturerName"])+" "+e._s(e.usb.device["productName"])+"设备上授权")]):e._e(),e.isAuthSuccess?s("p",[e._v("恭喜，您已完成授权！")]):e._e(),e.isAuthSuccess?s("b-button",{attrs:{type:"is-success",outlined:""},on:{click:function(t){e.step=2}}},[e._v("Next\n                            ")]):e._e()],1),s("b-step-item",{attrs:{label:"Done",clickable:!1,disabled:"",type:{"is-success":!0}}},[s("h1",{staticClass:"title has-text-centered"},[e._v("Done")]),s("p",[e._v("您可以激活Adb和设备管理员权限或安装Apk了!")]),e.isAuthSuccess?s("b-button",{attrs:{type:"is-success",outlined:""},on:{click:function(t){e.step=3}}},[e._v("Done")]):e._e()],1)],1)],1)])]):e._e(),s("b-modal",{attrs:{active:e.isModalActive},on:{"update:active":function(t){e.isModalActive=t}}},[s("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[e._v(e._s(e.current.name))])]),s("section",{staticClass:"modal-card-body"},[1===e.current.type?s("div",[e.current.content.length>1?s("b-field",[s("center",[s("b-select",{staticStyle:{"text-align":"center"},attrs:{placeholder:"选择一个选项",required:""},model:{value:e.current.choice,callback:function(t){e.$set(e.current,"choice",t)},expression:"current.choice"}},e._l(e.current.content,(function(t){return s("option",{domProps:{value:t.command}},[e._v(e._s(t.name))])})),0)],1)],1):e._e(),""!==e.current.choice?s("p",[e._v("\n\t\t\t\t\t\t\t即将执行ADB：adb shell "+e._s(e.current.choice)+"\n\n\t\t\t\t\t\t")]):e._e(),s("b-button",{attrs:{type:"is-warning"},on:{click:function(t){return e.execute_usb(e.current.choice)}}},[e._v("执行")])],1):e._e(),2===e.current.type?s("div",[s("b-field",[s("b-upload",{attrs:{"drag-drop":""},model:{value:e.dropFiles,callback:function(t){e.dropFiles=t},expression:"dropFiles"}},[s("section",{staticClass:"section"},[s("div",{staticClass:"content has-text-centered"},[s("p",[s("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),e.dropFiles?s("div",{staticClass:"tags"},[s("span",[e._v("\n                "+e._s(e.dropFiles.name)+"\n\n            ")])]):s("p",[e._v("拖拽或点击选择安装包")])])])])],1),s("p",[s("b-button",{attrs:{type:"is-warning"},on:{click:e.installApk}},[e._v("安装")])],1)],1):e._e(),3===e.current.type?s("div",[s("b-field",{attrs:{label:"Rounded"}},[s("b-input",{attrs:{placeholder:"笔给你，需要什么自己来！",rounded:""},model:{value:e.shell,callback:function(t){e.shell=t},expression:"shell"}})],1),s("p",[0!==e.shell.length?s("b-button",{attrs:{type:"is-warning"},on:{click:function(t){return e.execute_usb(e.shell)}}},[e._v("我 好 了")]):e._e()],1)],1):e._e(),0!==e.errors.length?s("b-message",{staticStyle:{width:"50%","margin-left":"25%","margin-right":"25%"},attrs:{title:"Error!",type:"is-danger","aria-close-label":"Close message","has-icon":""}},[s("center",[e._v(e._s(e.errors))])],1):e._e()],1)])]),s("div",{staticStyle:{height:"80vh",display:"flex"}},[s("div",{staticStyle:{margin:"20%"}},[s("div",{staticClass:"tile is-ancestor",staticStyle:{"justify-content":"center"}},[s("div",{staticClass:"tile is-parent is-vertical is-4"},[s("article",{staticClass:"tile is-child notification is-primary",on:{click:e.showadb}},[s("p",{staticClass:"title"},[e._v("ADB激活")]),s("p",{staticClass:"subtitle"},[e._v("呐呐呐你可以在网页上激活Brevent啦，空调狗和 Shizuku Manager也是一样嗷")])]),s("article",{staticClass:"tile is-child notification is-warning",on:{click:e.showadw}},[s("p",{staticClass:"title"},[e._v("设备管理员")]),s("p",{staticClass:"subtitle"},[e._v("If 你想使用设备管理员模式的冰箱:")]),s("p",{staticClass:"subtitle"},[e._v("        this.click()")])])]),s("div",{staticClass:"tile is-parent is-vertical is-4"},[s("article",{staticClass:"tile is-child notification is-warning",on:{click:e.showapk}},[s("p",{staticClass:"title"},[e._v("安装Apk")]),s("p",{staticClass:"subtitle"},[e._v("安装本地Apk")])]),s("article",{staticClass:"tile is-child notification is-warning",on:{click:e.showself}},[s("p",{staticClass:"title"},[e._v("执行自定义命令")]),s("p",{staticClass:"subtitle"},[e._v("笔给你，自己写！")])])])])])])],1)},i=[],r=(s("7f7f"),s("78ce"),s("6b54"),s("87b3"),s("96cf"),s("3b8d")),c=s("14b8"),o=s.n(c),l={name:"app",data:function(){return{name:"",step:0,isAdbActive:!0,adb:null,isAuthSuccess:void 0,errors:"",usb:null,isModalActive:!1,current:{type:0,name:"",content:[{name:"",command:""}],choice:""},dropFiles:void 0,shell:"",commandlist:[{name:"brevent.sh",command:"sh /data/data/me.piebridge.brevent/brevent.sh"},{name:"冰箱ADB模式",command:"sh /sdcard/Android/data/com.catchingnow.icebox/files/start.sh"},{name:"Shizuku Manager 激活",command:"shell sh /sdcard/Android/data/moe.shizuku.privileged.api/files/start.sh"},{name:"小黑屋（麦克斯韦妖）",command:"sh /sdcard/Android/data/web1n.stopapp/files/demon.sh"},{name:"权限狗",command:"sh /sdcard/Android/data/com.web1n.permissiondog/files/starter.sh"}]}},methods:{showadb:function(){this.errors="",this.current={type:1,name:"ADB激活",content:this.commandlist},this.isModalActive=!0},showadw:function(){this.errors="",this.current={type:1,name:"设备管理员激活",content:[{name:"小黑屋",command:"dpm set-device-owner com.catchingnow.icebox/.receiver.DPMReceiver"},{name:"小黑屋",command:"dpm set-device-owner web1n.stopapp/.receiver.AdminReceiver"}]},this.isModalActive=!0},showapk:function(){this.errors="",this.dropFiles=void 0,this.current={type:2,name:"安装自定义APK"},this.isModalActive=!0},showself:function(){this.errors="",this.current={type:3,name:"自力更生"},this.isModalActive=!0},connect:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,navigator.usb){e.next=3;break}throw new Error("浏览器不支持WebUSB");case 3:return e.next=5,o.a.open("WebUSB");case 5:if(this.usb=e.sent,this.usb&&(this.usb.isAdb()||this.usb.isFastboot())){e.next=8;break}throw new Error("设备不在Adb或Fastboot模式");case 8:this.step=1,e.next=16;break;case 11:return e.prev=11,e.t0=e["catch"](0),console.log(e.t0),this.errors=e.t0.toString(),e.abrupt("return");case 16:if(!this.usb.isAdb()){e.next=21;break}return e.next=19,this.usb.connectAdb("host::",(function(){t.isAuthSuccess=!1}));case 19:this.adb=e.sent,null!=this.adb&&(this.isAuthSuccess=!0);case 21:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}(),xfer_stats:function(e,t,s,n){var a=Date.now();if(!(a-xfer_stats_time<500)){xfer_stats_done>t&&(xfer_stats_done=0),xfer_stats_time<e&&(xfer_stats_time=e);var i=Math.round((a-e)/1e3),r=Math.round(1e3*(t-xfer_stats_done)/(1024*(a-xfer_stats_time))),c=Math.round(1e3*t/(1024*(a-e)));xfer_stats_done=t,xfer_stats_time=a;var o="";o+=Math.round(100*t/s)+"% (",o+=Math.round(t/1024)+" KiB in ~"+i+" secs at avg "+c+" KiB/s, cur "+r+" KiB/s)",n(o)}},push_usb:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.errors="",e.prev=1,null==this.adb){e.next=13;break}return this.$buefy.snackbar.open({message:"Loading "+this.dropFiles.name+"...",position:"is-top"}),e.next=6,this.adb.sync();case 6:return s=e.sent,Date.now(),e.next=10,s.push(this.dropFiles,t,"0644",(function(e,t){console.log(e,t)}));case 10:return e.next=12,s.quit();case 12:s=null;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](1),console.log(e.t0);case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));function t(t){return e.apply(this,arguments)}return t}(),installApk:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.adb){e.next=5;break}throw new Error("ADB设备未连接");case 5:if(console.log(this.dropFiles),this.dropFiles){e.next=10;break}throw new Error("无文件");case 10:return t=(new Date).getSeconds().valueOf()+".apk",console.log(t),e.next=14,this.push_usb("/data/local/tmp/"+t);case 14:return e.next=16,this.execute_usb("pm install -r /data/local/tmp/"+t);case 16:this.$buefy.snackbar.open({message:"安装"+this.dropFiles.name+"完成",position:"is-top"});case 17:e.next=24;break;case 19:e.prev=19,e.t0=e["catch"](0),console.log(e.t0),this.errors=e.t0.message,this.$buefy.snackbar.open({duration:5e3,message:e.t0.message,type:"is-danger",position:"is-top",queue:!1});case 24:case"end":return e.stop()}}),e,this,[[0,19]])})));function t(){return e.apply(this,arguments)}return t}(),execute_usb:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var s,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=new TextDecoder,this.errors="",e.prev=2,null!=this.adb){e.next=5;break}throw new Error("ADB设备未连接");case 5:return e.next=7,this.adb.open("shell: "+t);case 7:return n=e.sent,e.next=10,n.receive();case 10:a=e.sent;case 11:if("WRTE"!=a.cmd){e.next=19;break}return null!=a.data&&this.$buefy.snackbar.open({message:s.decode(a.data),position:"is-top"}),n.send("OKAY"),e.next=16,n.receive();case 16:a=e.sent,e.next=11;break;case 19:n.close(),n=null,e.next=27;break;case 23:e.prev=23,e.t0=e["catch"](2),this.errors=e.t0.message,this.$buefy.snackbar.open({duration:5e3,message:e.t0.message,type:"is-danger",position:"is-top",queue:!1});case 27:case"end":return e.stop()}}),e,this,[[2,23]])})));function t(t){return e.apply(this,arguments)}return t}()}},u=l,d=(s("034f"),s("2877")),p=Object(d["a"])(u,a,i,!1,null,null,null),h=p.exports,b=s("289d");s("5abe");n["a"].config.productionTip=!1,n["a"].use(b["a"]),new n["a"]({render:function(e){return e(h)}}).$mount("#app")},"64a9":function(e,t,s){}});
//# sourceMappingURL=app.98c17228.js.map